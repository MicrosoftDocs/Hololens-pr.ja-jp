---
title: 状態の分割と分離
description: HoloLens 2 Mixed Reality デバイスでの状態の分割、分離、コード署名、およびディフェンダー アプリケーションについて説明します。
author: evmill
ms.author: v-evmill
ms.reviewer: tagran
ms.date: 6/30/2020
ms.topic: article
keywords: セキュリティ、HoloLens、状態の分割、状態の分割と分離、HoloLens 2、HoloLens 2 セキュリティ、セキュリティの概要、セキュリティ アーキテクチャ、アーキテクチャ、HoloLens 2 アーキテクチャ
ms.prod: hololens
ms.sitesec: library
ms.localizationpriority: high
manager: yannisle
appliesto:
- HoloLens 2
ms.openlocfilehash: 60d6d7c0e281395957ce9158144a5f3d60927682
ms.sourcegitcommit: d20057957aa05c025c9838119cc29264bc57b4bd
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/21/2021
ms.locfileid: "11282808"
---
# <span data-ttu-id="c104d-104">状態の分割と分離</span><span class="sxs-lookup"><span data-stu-id="c104d-104">State separation and isolation</span></span>

<span data-ttu-id="c104d-105">状態の分割と分離は、オペレーティング システムを信頼できる状態で起動するために必要な部分など、HoloLens 2 オペレーティング システムの重要部分が変わらないように保護します。</span><span class="sxs-lookup"><span data-stu-id="c104d-105">State separation and isolation protects critical portions of the Hololens 2 operating system from change – such as those required for the operating system to boot into a trusted state.</span></span> <span data-ttu-id="c104d-106">分離技術を使用して、信頼できないアプリは、システム セキュリティに影響しないように、分離されたサンド ボックス環境に移動されます。</span><span class="sxs-lookup"><span data-stu-id="c104d-106">With isolation technology, untrusted apps are moved to an isolated sandbox environment, to ensure that they do not affect system security.</span></span>

## <span data-ttu-id="c104d-107">状態の分割</span><span class="sxs-lookup"><span data-stu-id="c104d-107">State separation</span></span>

<span data-ttu-id="c104d-108">HoloLens 2 の状態の分割によって、セキュリティと保守性は大幅に改良され (更新中)、アプリケーションのデータを保護します。</span><span class="sxs-lookup"><span data-stu-id="c104d-108">State separation on HoloLens 2 vastly improves security and serviceability (updating) and helps protect your application data.</span></span>  <span data-ttu-id="c104d-109">状態の分割の機能は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="c104d-109">State separation works as follows:</span></span>
  * <span data-ttu-id="c104d-110">コア オペレーティング システムは、コア オペレーティング システム ボリュームに保存されています (信頼できるまたは確認済みの Microsoft OS がオペレーティング システムを更新しています)。</span><span class="sxs-lookup"><span data-stu-id="c104d-110">The core operating system is stored in the core operating system volume (trusted or verified Microsoft OS updating the operating system).</span></span>
  * <span data-ttu-id="c104d-111">実行時に変更できるオペレーティング システムの部分 (ダウンロード可能なドライバーや構成など) は、さらに状態の分割を使用してデータを分割し、安全な別の保存場所に格納します。</span><span class="sxs-lookup"><span data-stu-id="c104d-111">The portions of the operating system that can be changed at run time (such as downloadable drivers and configurations), use further state separation to partition the data, and to store it in secure, separate storage locations.</span></span>
  * <span data-ttu-id="c104d-112">セキュリティで保護された各保存場所には、個別のセキュリティ ポリシーが関連付けられることで、さまざまなセキュリティ上の利点があります。次のセクションで詳細に説明します。</span><span class="sxs-lookup"><span data-stu-id="c104d-112">Each secure storage location has distinct security policies associated with it, offering varied security advantages as detailed in the following section.</span></span>

## <span data-ttu-id="c104d-113">状態の分割の利点</span><span class="sxs-lookup"><span data-stu-id="c104d-113">State separation benefits</span></span>

  * <span data-ttu-id="c104d-114">セキュリティ: HoloLens 2 で使用される状態の分割は、プラットフォームの整合性、マルウェアへの耐性、ユーザー データ保護を大幅に改善させます。</span><span class="sxs-lookup"><span data-stu-id="c104d-114">Security: The state separation featured in HoloLens 2 significantly improves platform integrity, malware resistance and user data protection.</span></span> <span data-ttu-id="c104d-115">状態の分割がオペレーティング システムの変更できない部分を分割して、読み取り専用にするか整合性の保護を行うことで、マルウェアが再起動後に状態を維持するのは非常に難しくなります。</span><span class="sxs-lookup"><span data-stu-id="c104d-115">By separating the unalterable part of the operating system and making it read-only or integrity protected, state separation makes it extremely difficult for malware to persist across a cold reboot.</span></span> 
  * <span data-ttu-id="c104d-116">更新: HoloLens 2 では、コア オペレーティング システムが変更できない状態になり、デバイス上の残りのデータから完全に分割されると、更新がシンプルかつ信頼性の高いものになります。</span><span class="sxs-lookup"><span data-stu-id="c104d-116">Updates: With HoloLens 2, once the core operating system is unmodifiable and has been cleanly separated from the rest of the data on the device, updates become simple and reliable.</span></span>  <span data-ttu-id="c104d-117">さらに、状態の分割は、更新プログラムを劇的に早くするための非常に重要な基礎作りをするため、1 回の操作 (atomic 単位) でオペレーティング システムを置き換えることができます。</span><span class="sxs-lookup"><span data-stu-id="c104d-117">In addition, state separation lays the vital groundwork for dramatically faster updates, which permits the operating system to be replaced in a single step (atomic unit).</span></span>
  * <span data-ttu-id="c104d-118">デバイスのリセット: HoloLens 2 リセットは、ユーザーが生成したデータおよびデバイス上のユーザー アプリのデータ (内部および外部の保存場所を含む) をクリアします。</span><span class="sxs-lookup"><span data-stu-id="c104d-118">Device reset: HoloLens 2 reset clears user generated data and user app data on the device – including internal and external storage locations.</span></span> <span data-ttu-id="c104d-119">現在の OS アプリとセキュリティ上重要なアプリ、および現在の Microsoft と OEM のカスタマイズ済みアプリ (プレインストール済みアプリ) は保持されます。</span><span class="sxs-lookup"><span data-stu-id="c104d-119">It preserves the current OS apps and security critical apps, and the current Microsoft and OEM customized apps (Preinstalled).</span></span> <span data-ttu-id="c104d-120">プリインストールされたアプリはリセットの完了後にデバイス上で復元できます</span><span class="sxs-lookup"><span data-stu-id="c104d-120">These Preinstalled apps can be rehydrated on the device after reset completes</span></span>

### <span data-ttu-id="c104d-121">状態の分割の状態</span><span class="sxs-lookup"><span data-stu-id="c104d-121">State separation states</span></span>

<span data-ttu-id="c104d-122">状態の分割では、Microsoft の信頼済みデバイス コンポーネントだけがオペレーティングシ ステムを変更できます。また、重要な状態だけが再起動後に状態を維持することを許可されます。その他のシステム状態は、ブート セッション中にのみ存在し、再起動後に破棄されます。</span><span class="sxs-lookup"><span data-stu-id="c104d-122">State separation ensures the operating system can only be changed by Microsoft trusted device components and only high-value state is allowed to persist across reboots; other system state exists only for the duration of the boot session and is discarded after a reboot.</span></span> <span data-ttu-id="c104d-123">状態の分割を使用すれば、デバイスをすぐに Factory の状態に戻すことができます。</span><span class="sxs-lookup"><span data-stu-id="c104d-123">Having state separation rapidly returns the device back to factory state.</span></span> <span data-ttu-id="c104d-124">Windows Holographic for Business の状態は、次のような異なるカテゴリーに分割されます。</span><span class="sxs-lookup"><span data-stu-id="c104d-124">Windows Holographic for Business states can be divided into these distinct categories:</span></span>
  * <span data-ttu-id="c104d-125">コア オペレーティング システム – 変更できない状態</span><span class="sxs-lookup"><span data-stu-id="c104d-125">Core operating system – Unalterable state</span></span>
  * <span data-ttu-id="c104d-126">オペレーティング システム データ – 変更できる状態</span><span class="sxs-lookup"><span data-stu-id="c104d-126">Operating System Data – Alterable state</span></span> 
  * <span data-ttu-id="c104d-127">ユーザー データ – 変更できる状態</span><span class="sxs-lookup"><span data-stu-id="c104d-127">User Data – Alterable state</span></span>

<span data-ttu-id="c104d-128">HoloLens 2 のこれらのオペレーティングの状態については、次のセクションで説明します。</span><span class="sxs-lookup"><span data-stu-id="c104d-128">Each of these HoloLens 2 operating states is described in the following section.</span></span>

#### <span data-ttu-id="c104d-129">コア オペレーティング システム</span><span class="sxs-lookup"><span data-stu-id="c104d-129">Core operating system</span></span>

<span data-ttu-id="c104d-130">変更できない状態は、実行可能ファイルと変更できないデータで構成され、更新プログラムのインストール中に Microsoft のみが変更できます。</span><span class="sxs-lookup"><span data-stu-id="c104d-130">An immutable state is comprised of executable files and data that are unalterable and can only be changed by Microsoft during the installation of updates.</span></span> <span data-ttu-id="c104d-131">このようなコア オペレーティング システムの更新中は、最新のオペレーティングの状態を含む新しい画像が有効になります。</span><span class="sxs-lookup"><span data-stu-id="c104d-131">During such an update of the core operating system, a new image containing the latest desired operating state is enabled.</span></span>
<span data-ttu-id="c104d-132">変更できない状態は、読み取り専用に設定されているか、整合性が保護され、システム特権によるマルウェアの持続性を防いでいます。</span><span class="sxs-lookup"><span data-stu-id="c104d-132">The unalterable state is marked as read-only (or is otherwise integrity-protected), preventing persistence of any malware with elevated privileges.</span></span> <span data-ttu-id="c104d-133">変更できない状態では、次の実行可能ファイルとデータが保護されます。</span><span class="sxs-lookup"><span data-stu-id="c104d-133">The following executable files and data are protected in the immutable state:</span></span>
  * <span data-ttu-id="c104d-134">Windows Holographic 受信トレイのドライバー</span><span class="sxs-lookup"><span data-stu-id="c104d-134">Windows Holographic inbox drivers</span></span>
  * <span data-ttu-id="c104d-135">オペレーティング システム バイナリ</span><span class="sxs-lookup"><span data-stu-id="c104d-135">Operating system binaries</span></span>
  * <span data-ttu-id="c104d-136">Windows 受信トレイのドライバー</span><span class="sxs-lookup"><span data-stu-id="c104d-136">Windows inbox drivers</span></span>
  * <span data-ttu-id="c104d-137">Windows レジストリ ハイブ (HKLM) に保存されている Static Windows Holographic の設定</span><span class="sxs-lookup"><span data-stu-id="c104d-137">Static Windows Holographic settings stored in Windows registry hive (HKLM)</span></span>
    * <span data-ttu-id="c104d-138">例: HKLM には、コンピューターにインストールされているアプリの構成情報が保存されます。</span><span class="sxs-lookup"><span data-stu-id="c104d-138">Example: HKLM stores the configuration information for the apps installed on a machine.</span></span> <span data-ttu-id="c104d-139">また、ハードウェアと対応するドライバーを検出するための情報も保存されます。</span><span class="sxs-lookup"><span data-stu-id="c104d-139">It also stores information to detect hardware and the corresponding drivers.</span></span>
<span data-ttu-id="c104d-140">これらを変更できない (読み取り専用で整合性が保護されている) 状態で保護することで、コア オペレーティング システムは常に信頼された状態で起動します。</span><span class="sxs-lookup"><span data-stu-id="c104d-140">By protecting these in the immutable (integrity and read-only protected) state, we ensure that the core operating system always boots into a trusted state.</span></span> <span data-ttu-id="c104d-141">また、デバイスがリセットされた場合、そのデバイスはこの変更できないセクションのコンポーネントでのみ起動します。</span><span class="sxs-lookup"><span data-stu-id="c104d-141">Additionally, when a device is reset, we can ensure that the device boots only into the components that are on this immutable section.</span></span> 

#### <span data-ttu-id="c104d-142">オペレーティング システム データ</span><span class="sxs-lookup"><span data-stu-id="c104d-142">Operating system data</span></span> 

<span data-ttu-id="c104d-143">実行時に変更できる実行可能ファイルとデータ (およびオペレーティング システム機能にとって重要ではないデータ) は、データが破損しているときやセキュリティ侵害を受けたときに破棄、再作成できることに注意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c104d-143">It is important to note that executable files and data that are changeable at runtime (and are not critical to the operating system function), can be discarded and re-created when the data is corrupted or compromised.</span></span> <span data-ttu-id="c104d-144">重要な変更できる状態は、オペレーティング システムによって機能的に保持されるか、オペレーティング システムのシャットダウン中に保持されるか、または、およびサポートされている Windows オペレーティング システムとデバイスのシナリオによって再起動中に保持される必要があります。</span><span class="sxs-lookup"><span data-stu-id="c104d-144">A high-value alterable state is either functionally required to persist by the operating system, or expected to persist across operating system shutdown, and/or across reboots by supported Windows operating system and device scenarios.</span></span> <span data-ttu-id="c104d-145">重要な変更可能な状態の例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="c104d-145">Examples of high-value mutable state are:</span></span>
  * <span data-ttu-id="c104d-146">すべてのユーザーを対象に場所を無効にするなどの IT 管理者構成のグローバル デバイス設定。</span><span class="sxs-lookup"><span data-stu-id="c104d-146">IT Admin-configured global device settings, such as disabling the location for all users.</span></span>
  * <span data-ttu-id="c104d-147">Wi-Fi ネットワーク接続アクセスの記憶されたデータ デバイスのネットワークと関連付けられた接続パスワード。</span><span class="sxs-lookup"><span data-stu-id="c104d-147">Wi-fi network connection access data-device-remembered networks and associated connection passwords.</span></span>
  * <span data-ttu-id="c104d-148">設定、ログを含むクラッシュ ダンプ。</span><span class="sxs-lookup"><span data-stu-id="c104d-148">Crash dumps including settings, logs.</span></span>
  * <span data-ttu-id="c104d-149">新しく検出されたデバイスのために必要に応じてダウンロードされるドライバー。</span><span class="sxs-lookup"><span data-stu-id="c104d-149">Drivers downloaded on-demand for newly discovered devices.</span></span>
<span data-ttu-id="c104d-150">HoloLens 2 の重要な変更できる状態は、オペレーティング システム データ セキュリティの保管場所の、ディスク内または保存済みのレジストリ ハイブ内にファイルとして保存されます。</span><span class="sxs-lookup"><span data-stu-id="c104d-150">A high-value alterable state on HoloLens 2 resides on the operating system Data security location, either as a saved file on disk or in a persisted registry hive.</span></span>

#### <span data-ttu-id="c104d-151">ユーザー データ</span><span class="sxs-lookup"><span data-stu-id="c104d-151">User data</span></span>

<span data-ttu-id="c104d-152">状態の最後のカテゴリは、UWP アプリケーションまたはオペレーティング システムによって作成または保存されたユーザー データを表します。</span><span class="sxs-lookup"><span data-stu-id="c104d-152">The last category of state represents user data produced or persisted by UWP applications or the operating system.</span></span> <span data-ttu-id="c104d-153">また、ダウンロード、ドキュメント、ビデオ、ユーザー プロファイル、HKEY_CURRENT_USER ハイブなどのすべての既知のユーザー フォルダーもこの場所に保存されます。</span><span class="sxs-lookup"><span data-stu-id="c104d-153">All known user folders such as Downloads, Documents, Videos, user profiles and HKEY_CURRENT_USER hive are also stored in this location.</span></span> <span data-ttu-id="c104d-154">このデータの抽出には、適切な資格情報が必要です。データ保護の詳細については、「[暗号化とデータ保護](security-encryption-data-protection.md)」 を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c104d-154">This data cannot be extracted without proper credentials; to learn more about how your data is protected, see [Encryption and Data Protection](security-encryption-data-protection.md).</span></span>

##  <span data-ttu-id="c104d-155">分離</span><span class="sxs-lookup"><span data-stu-id="c104d-155">Isolation</span></span>

<span data-ttu-id="c104d-156">バランスを取るために、HoloLens 2 には、起動、ハードウェアの制御、ログインなどの主な機能に使用されるコア オペレーティング システムが用意されています。コア オペレーティング システムで実行するアプリケーションには、プリインストールされたアプリケーションと UWP アプリの 2 つがあります。</span><span class="sxs-lookup"><span data-stu-id="c104d-156">To achieve this balance, HoloLens 2 has a core operating system that is used for primary functions such as booting up, hardware control, logging in etc. There are only two sets of applications that run on the core operating system – pre-installed applications and UWP apps.</span></span>

## <span data-ttu-id="c104d-157">コード署名</span><span class="sxs-lookup"><span data-stu-id="c104d-157">Code signing</span></span>

<span data-ttu-id="c104d-158">デジタル署名のコードは、実行可能ファイルとスクリプトが信頼できる発行元によって署名され、変更されていないため、信頼性と整合性を確保できることを実証します。</span><span class="sxs-lookup"><span data-stu-id="c104d-158">Digitally signing code allows substantiation that executables and scripts have not been modified since they were signed by a trusted source therefore providing authenticity and integrity.</span></span> <span data-ttu-id="c104d-159">HoloLens 2 は、Microsoft および Microsoft ストアの 2 つの機関を信頼しています。</span><span class="sxs-lookup"><span data-stu-id="c104d-159">The authorities that HoloLens 2 trusts by default are Microsoft and Microsoft Store.</span></span> <span data-ttu-id="c104d-160">IT 管理者は [ClientCertificateInstall](https://docs.microsoft.com/windows/client-management/mdm/clientcertificateinstall-csp) および [RootCATrustedCertificates](https://docs.microsoft.com/windows/client-management/mdm/rootcacertificates-csp) CSP から、新しい証明書をデバイスに追加できます。</span><span class="sxs-lookup"><span data-stu-id="c104d-160">IT administrators can add new certificates to the device through the [ClientCertificateInstall](https://docs.microsoft.com/windows/client-management/mdm/clientcertificateinstall-csp) and [RootCATrustedCertificates](https://docs.microsoft.com/windows/client-management/mdm/rootcacertificates-csp) CSPs.</span></span> <span data-ttu-id="c104d-161">また、[AllowAllTrustedApps ポリシー](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-applicationmanagement#applicationmanagement-allowalltrustedapps) を、信頼する追加のサイドロードや [基幹業務アプリ](https://docs.microsoft.com/intune/apps/lob-apps-windows) に使用できます。</span><span class="sxs-lookup"><span data-stu-id="c104d-161">They can also use the [AllowAllTrustedApps policy](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-applicationmanagement#applicationmanagement-allowalltrustedapps) to trust additional sideloaded or [Line-of-business apps](https://docs.microsoft.com/intune/apps/lob-apps-windows).</span></span> <span data-ttu-id="c104d-162">証明書はローカル コンピューターの証明書ストアにあり、"Device" を使用している場合は HKLM/Root に格納されます。 "User" を使用している場合は HKCU に格納されます。</span><span class="sxs-lookup"><span data-stu-id="c104d-162">Certificates reside in the local machine certificate store which is stored in HKLM/Root if using “Device” or in HKCU if using “User”.</span></span>

## <span data-ttu-id="c104d-163">Defender の保護</span><span class="sxs-lookup"><span data-stu-id="c104d-163">Defender protections</span></span>
<span data-ttu-id="c104d-164">HoloLens 2 は、Microsoft サービスを使用して最新水準のセキュリティを提供します。</span><span class="sxs-lookup"><span data-stu-id="c104d-164">HoloLens 2 uses Microsoft services to give users an advanced level of security:</span></span>

* <span data-ttu-id="c104d-165">[Defender SmartScreen](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-smartscreen/microsoft-defender-smartscreen-overview) は、OS によって Windows Holographic で自動的に有効になり、 Microsoft Edge でのフィッシング詐欺やマルウェア、悪意がある可能性があるファイルのダウンロードに対して保護を実行します。</span><span class="sxs-lookup"><span data-stu-id="c104d-165">[Defender SmartScreen](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-smartscreen/microsoft-defender-smartscreen-overview) is automatically enabled on Windows Holographic by the OS and protects against phishing and malware, as well as the downloading of potentially malicious files, on Edge.</span></span> <span data-ttu-id="c104d-166">ユーザーは無効にできませんが、ポリシーを使用して無効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="c104d-166">It cannot be turned off by the user but can be disabled through policy.</span></span>

* <span data-ttu-id="c104d-167">[Defender ファイアウォール](https://docs.microsoft.com/windows/security/threat-protection/windows-firewall/windows-firewall-with-advanced-security) は、承認されていないネットワーク トラフィックがデバイスへ、またはデバイスから送信されるのを防ぎます。</span><span class="sxs-lookup"><span data-stu-id="c104d-167">[Defender Firewall](https://docs.microsoft.com/windows/security/threat-protection/windows-firewall/windows-firewall-with-advanced-security) blocks unauthorized network traffic from flowing to and from your device.</span></span> <span data-ttu-id="c104d-168">この機能は既定で有効になっています。ローカルのアクションやポリシーを使って顧客が構成できません。</span><span class="sxs-lookup"><span data-stu-id="c104d-168">It is enabled by default and not configurable by the customer through local actions or policy.</span></span> 

* <span data-ttu-id="c104d-169">[Windows Defender アプリケーション制御](https://docs.microsoft.com/windows/security/threat-protection/windows-defender-application-control/wdac-and-applocker-overview):  HoloLens 2 は WDAC をサポートし、IT 管理者はアプリケーション制御ポリシーをデバイスにプッシュできるようになります。</span><span class="sxs-lookup"><span data-stu-id="c104d-169">[Windows Defender Application Control](https://docs.microsoft.com/windows/security/threat-protection/windows-defender-application-control/wdac-and-applocker-overview):  HoloLens 2 supports WDAC which allows IT admin to push application control policies onto the device.</span></span> <span data-ttu-id="c104d-170">詳細については、[MSFT Intune を使用して HoloLens 2 デバイスで WDAC を使用する](https://docs.microsoft.com/mem/intune/configuration/custom-profile-hololens)参照ください。</span><span class="sxs-lookup"><span data-stu-id="c104d-170">More info can be found in [Use WDAC on HoloLens 2 devices with MSFT Intune](https://docs.microsoft.com/mem/intune/configuration/custom-profile-hololens).</span></span> 

<span data-ttu-id="c104d-171">IT 管理者は、[AllowSmartScreen](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-browser#browser-allowsmartscreen) を使って SmartScreen の動作を管理でき、[これらのポリシー](https://docs.microsoft.com/windows/client-management/mdm/policy-csps-supported-by-hololens2)を使ってブラウザーの動作を管理できます。</span><span class="sxs-lookup"><span data-stu-id="c104d-171">IT admins can manage SmartScreen behavior through [AllowSmartScreen](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-browser#browser-allowsmartscreen) and browser behavior through [these policies](https://docs.microsoft.com/windows/client-management/mdm/policy-csps-supported-by-hololens2).</span></span> 

